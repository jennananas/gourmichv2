<p-card class="w-full relative shadow-sm rounded-md overflow-hidden
        hover:shadow-lg transition-shadow duration-300 ease-in-out cursor-pointer"
        (click)="onViewDetails()">

  <ng-template pTemplate="header">
    <div class="relative">
      <ng-container *ngIf="!imageLoadError; else fallback">
        <img [src]="recipe.imageUrl" 
             (error)="imageLoadError = true"
             class="w-full h-40 object-cover rounded-t-md"
             alt="Image de {{ recipe.title }}">
      </ng-container>

      <ng-template #fallback>
        <div class="w-full h-40 rounded-t-md bg-gradient-to-br from-yellow-300 via-orange-300 to-orange-500 
                    flex flex-col items-center justify-center text-white font-semibold text-sm">
          <i class="pi pi-image text-xl mb-1"></i>
          Image not available
        </div>
      </ng-template>

      <p-chip [label]="setDifficultyLabel(recipe.difficulty)"
              styleClass="!bg-white/80 absolute top-2 right-2 !text-orange-900 font-semibold text-xs">
      </p-chip>

      <button type="button"
              aria-label="Ajouter aux favoris"
              class="absolute bottom-2 right-2 rounded-md h-8 w-8 flex items-center justify-center
                     bg-white/80 hover:bg-white transition"
              (click)="onToggleFavorite($event)">
        <i [ngClass]="favoriteStatus ? 'pi pi-heart-fill text-red-500' : 'pi pi-heart text-red-500'">
        </i>
      </button>
    </div>
  </ng-template>

  <div class="p-4 space-y-3">
    <div>
      <h3 class="font-semibold text-lg text-gray-800">{{ recipe.title }}</h3>
      <p class="text-sm text-gray-500">
        By <span class="text-gray-900/80">{{ recipe.authorUsername }}</span>
      </p>
    </div>

    <div class="grid grid-cols-2 gap-y-4 text-xs text-gray-600">
      <div class="flex items-center gap-1">
        <i class="pi pi-clock text-orange-500"></i>
        <span>{{ recipe.cookingTime }} min</span>
      </div>
    </div>

    <div class="flex flex-wrap gap-2">
      <p-chip [label]="recipe.category" class="bg-orange-100 text-orange-700 text-xs"></p-chip>
    </div>

    <button pButton type="button" 
            [style.backgroundColor]="'oklch(0.74 0.18 51.74)'"
            [style.borderColor]="'oklch(0.74 0.18 51.74)'"
            label="View Recipe" class="w-full"
            (click)="onViewDetails()">
    </button>
  </div>
</p-card>