import{a as J,b as K}from"./chunk-XDLOLFB4.js";import{b as N,d as m,f as O,g as L,h as g,j as z,l as B,m as D,n as U,p as Z,r as j,s as G,t as $,u as W,v as H}from"./chunk-I6IL7XK6.js";import{f as M}from"./chunk-TTGFIYR3.js";import"./chunk-6YLYVHER.js";import{Ha as q,Ia as V,e as I,h as T,s as R,t as k}from"./chunk-23YALWC7.js";import{Ea as w,Eb as f,I as E,K as x,Ma as P,Sa as d,Za as o,ab as F,db as i,eb as l,fb as p,kb as A,lb as c,m as h,q as y,w as S,wb as s,y as C,za as a}from"./chunk-VYOVHIPB.js";function Q(r,n){return e=>{let t=e.get(r),u=e.get(n);if(!t||!u||u.errors&&!u.errors.passwordMismatch)return null;if(t.value!==u.value)u.setErrors({passwordMismatch:!0});else{let v=u.errors;v&&(delete v.passwordMismatch,Object.keys(v).length===0?u.setErrors(null):u.setErrors(v))}return null}}function b(r,n="notUnique",e=500){return t=>t.value?S(e).pipe(E(()=>r(t.value)),y(u=>u?{[n]:!0}:null),C(()=>h(null))):h(null)}var _=()=>({width:"100%"});function Y(r,n){r&1&&(i(0,"small"),s(1,"\u26A0\uFE0F Email is required"),l())}function ee(r,n){r&1&&(i(0,"small"),s(1,"\u26A0\uFE0F Email not valid"),l())}function re(r,n){r&1&&(i(0,"small"),s(1,"\u26A0\uFE0F This email is already used"),l())}function te(r,n){if(r&1&&(i(0,"div",22),d(1,Y,2,0,"small",23)(2,ee,2,0,"small",23)(3,re,2,0,"small",23),l()),r&2){let e=c();a(),o("ngIf",e.email==null||e.email.errors==null?null:e.email.errors.required),a(),o("ngIf",(e.email==null||e.email.errors==null?null:e.email.errors.email)||(e.email==null||e.email.errors==null?null:e.email.errors.pattern)),a(),o("ngIf",e.email==null||e.email.errors==null?null:e.email.errors.emailTaken)}}function ie(r,n){r&1&&(i(0,"small"),s(1,"\u26A0\uFE0F Username is required"),l())}function ne(r,n){r&1&&(i(0,"small"),s(1,"\u26A0\uFE0F Username must be between 4 and 20 characters long."),l())}function le(r,n){r&1&&(i(0,"small"),s(1,"\u26A0\uFE0F Use only letters, digit or underscore (_)"),l())}function ae(r,n){r&1&&(i(0,"small"),s(1,"\u26A0\uFE0F This username is already taken"),l())}function oe(r,n){if(r&1&&(i(0,"div",22),d(1,ie,2,0,"small",23)(2,ne,2,0,"small",23)(3,le,2,0,"small",23)(4,ae,2,0,"small",23),l()),r&2){let e=c();a(),o("ngIf",e.username==null||e.username.errors==null?null:e.username.errors.required),a(),o("ngIf",(e.username==null||e.username.errors==null?null:e.username.errors.minlength)||(e.username==null||e.username.errors==null?null:e.username.errors.maxlength)),a(),o("ngIf",e.username==null||e.username.errors==null?null:e.username.errors.pattern),a(),o("ngIf",e.username==null||e.username.errors==null?null:e.username.errors.usernameTaken)}}function se(r,n){r&1&&(i(0,"small"),s(1,"\u26A0\uFE0F Password is required."),l())}function me(r,n){r&1&&(i(0,"small"),s(1,"\u26A0\uFE0F Password must be at least 8 characters long"),l())}function ue(r,n){r&1&&(i(0,"small"),s(1,"\u26A0\uFE0F Password must contains at least a lowercase, an uppercase, a digit and a special character."),l())}function de(r,n){if(r&1&&(i(0,"div",22),d(1,se,2,0,"small",23)(2,me,2,0,"small",23)(3,ue,2,0,"small",23),l()),r&2){let e=c();a(),o("ngIf",e.password==null||e.password.errors==null?null:e.password.errors.required),a(),o("ngIf",e.password==null||e.password.errors==null?null:e.password.errors.minlength),a(),o("ngIf",e.password==null||e.password.errors==null?null:e.password.errors.pattern)}}function pe(r,n){r&1&&(i(0,"small"),s(1,"\u26A0\uFE0F Password confirmation is required"),l())}function ce(r,n){r&1&&(i(0,"small"),s(1,"\u26A0\uFE0F Passwords don't match"),l())}function fe(r,n){if(r&1&&(i(0,"div",22),d(1,pe,2,0,"small",23)(2,ce,2,0,"small",23),l()),r&2){let e=c();a(),o("ngIf",e.confirmPassword==null||e.confirmPassword.errors==null?null:e.confirmPassword.errors.required),a(),o("ngIf",e.confirmPassword==null||e.confirmPassword.errors==null?null:e.confirmPassword.errors.passwordMismatch)}}var X=class r{constructor(n,e,t){this.router=n;this.formBuilder=e;this.authService=t}registerForm;get username(){return this.registerForm.get("username")}get email(){return this.registerForm.get("email")}get password(){return this.registerForm.get("password")}get confirmPassword(){return this.registerForm.get("confirmPassword")}get passwordMatch(){return this.registerForm.get("password")?.value===this.registerForm.get("confirmPassword")?.value}isFieldInvalid(n){let e=this.registerForm.get(n);return!!e?.invalid&&(!!e?.dirty||!!e?.touched)}ngOnInit(){this.registerForm=this.formBuilder.group({username:new g("",{validators:[m.required,m.minLength(4),m.maxLength(20),m.pattern("^[a-zA-Z0-9]+$")],asyncValidators:[b(this.authService.checkUsername.bind(this.authService),"usernameTaken")],updateOn:"blur"}),password:new g("",{validators:[m.required,m.minLength(8),m.maxLength(20),m.pattern("^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[^A-Za-z\\d])[A-Za-z\\d\\W_]{8,}$")],updateOn:"blur"}),confirmPassword:new g("",{validators:[m.required],updateOn:"blur"}),email:new g("",{validators:[m.required,m.pattern(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/)],asyncValidators:[b(this.authService.checkEmail.bind(this.authService),"emailTaken")],updateOn:"blur"})},{validators:Q("password","confirmPassword"),updateOn:"blur"})}onSubmit(){if(this.registerForm.invalid){this.registerForm.markAllAsTouched(),console.log("Form is invalid"),console.log(this.registerForm.errors);return}let n=this.registerForm.value;console.log("Form Data:",n),console.log("Form submitted"),this.authService.register(n).pipe(x({next:e=>{console.log("Registration successful",e),this.router.navigateByUrl("/login")},error:e=>{console.error("Registration failed",e)}})).subscribe()}static \u0275fac=function(e){return new(e||r)(w(R),w(Z),w(M))};static \u0275cmp=P({type:r,selectors:[["app-register"]],decls:36,vars:22,consts:[[1,"relative","z-10","h-screen","w-full","items-center","justify-center","mt-10"],[1,"w-full","max-w-md","m-auto","bg-white","rounded","p-8","pb-12"],[1,"flex","items-center","gap-2","mb-8"],["src","./assets/images/chef.png",1,"w-24"],[1,"text-2xl"],[1,"mb-4",3,"ngSubmit","formGroup"],[1,"mb-4"],["class","text-red-500",4,"ngIf"],["variant","on",1,"w-full"],["pInputText","","id","email","formControlName","email","required","","type","email","name","email",1,"w-full"],["for","email"],["variant","on"],["pInputText","","id","username","formControlName","username","required","","type","text","name","username",1,"w-full"],["for","username"],["formControlName","password","type","password","styleClass","p-password p-component p-inputwrapper p-input-icon-right",1,"w-full",3,"feedback","inputStyle","toggleMask"],["for","password"],["formControlName","confirmPassword","type","password","styleClass","p-password p-component p-inputwrapper p-input-icon-right",1,"w-full",3,"feedback","inputStyle","toggleMask"],["for","confirmPassword"],["label","Submit","type","submit","styleClass","w-full",3,"disabled"],[1,"flex","justify-between"],["label","Forgot Password?","icon","pi pi-exclamation-triangle","styleClass","text-gray-600!","routerLink","/forgot-password",3,"link"],["label","Login","icon","pi pi-arrow-left","styleClass","text-gray-600!","routerLink","/login",3,"link"],[1,"text-red-500"],[4,"ngIf"]],template:function(e,t){e&1&&(i(0,"div",0)(1,"div",1)(2,"header",2),p(3,"img",3),i(4,"h2",4),s(5,"Create your account"),l()(),i(6,"form",5),A("ngSubmit",function(){return t.onSubmit()}),i(7,"div",6),d(8,te,4,3,"div",7),i(9,"p-floatlabel",8),p(10,"input",9),i(11,"label",10),s(12,"Email"),l()()(),i(13,"div",6),d(14,oe,5,4,"div",7),i(15,"p-floatlabel",11),p(16,"input",12),i(17,"label",13),s(18,"Username"),l()()(),i(19,"div",6),d(20,de,4,3,"div",7),i(21,"p-floatlabel",11),p(22,"p-password",14),i(23,"label",15),s(24,"Password"),l()()(),i(25,"div",6),d(26,fe,3,2,"div",7),i(27,"p-floatlabel",11),p(28,"p-password",16),i(29,"label",17),s(30,"Confirm Password"),l()()(),i(31,"div"),p(32,"p-button",18),l()(),i(33,"footer",19),p(34,"p-button",20)(35,"p-button",21),l()()()),e&2&&(a(6),o("formGroup",t.registerForm),a(2),o("ngIf",(t.email==null?null:t.email.invalid)&&((t.email==null?null:t.email.dirty)||(t.email==null?null:t.email.touched))),a(6),o("ngIf",(t.username==null?null:t.username.invalid)&&((t.username==null?null:t.username.dirty)||(t.username==null?null:t.username.touched))),a(6),o("ngIf",(t.password==null?null:t.password.invalid)&&((t.password==null?null:t.password.dirty)||(t.password==null?null:t.password.touched))),a(2),F(f(18,_)),o("feedback",!0)("inputStyle",f(19,_))("toggleMask",!0),a(4),o("ngIf",(t.confirmPassword==null?null:t.confirmPassword.invalid)&&((t.confirmPassword==null?null:t.confirmPassword.dirty)||(t.confirmPassword==null?null:t.confirmPassword.touched))),a(2),F(f(20,_)),o("feedback",!1)("inputStyle",f(21,_))("toggleMask",!0),a(4),o("disabled",t.registerForm.invalid),a(2),o("link",!0),a(),o("link",!0))},dependencies:[k,j,z,N,O,L,U,B,D,T,I,V,q,H,W,$,G,K,J],encapsulation:2})};export{X as RegisterComponent};
