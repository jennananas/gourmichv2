import{a as z,b as O}from"./chunk-HVHOHJRM.js";import{b as L,d as f,f as N,g as E,h as v,j as T,l as q,m as B,n as A,p as G,r as P,s as R,t as D,u as j,v as V}from"./chunk-MYI6XZ3B.js";import{f as I}from"./chunk-HSIN7PCI.js";import"./chunk-F2X3VGZZ.js";import{Ha as k,Ia as M,e as x,h as y,s as C,t as _}from"./chunk-C633TUPX.js";import{Ea as d,Eb as g,Ma as b,Sa as c,Za as l,ab as h,db as e,eb as n,fb as m,kb as w,lb as S,wb as s,yb as F,za as o}from"./chunk-2KLC34RG.js";var U=()=>({width:"100%"});function J(i,a){if(i&1&&(e(0,"p",16),s(1),n()),i&2){let r=S();o(),F(" ",r.errorMessage," ")}}function K(i,a){i&1&&(e(0,"div")(1,"small",17),s(2,"Username is required"),n()())}function Q(i,a){i&1&&(e(0,"div")(1,"small",17),s(2,"Password is required"),n()())}var H=class i{constructor(a,r,t){this.router=a;this.formBuilder=r;this.authService=t}value;loginForm;errorMessage="";ngOnInit(){this.initializeForm()}initializeForm(){this.loginForm=this.formBuilder.group({username:new v("",[f.required]),password:new v("",[f.required])})}onSubmit(){if(this.loginForm.invalid){this.loginForm.markAllAsTouched();return}let{username:a,password:r}=this.loginForm.value;this.authService.login(a,r).subscribe({next:t=>{this.authService.saveToken(t.token),this.authService.saveUserName(a),this.router.navigate(["/"])},error:t=>{this.errorMessage="Invalid credentials, please try again."}})}static \u0275fac=function(r){return new(r||i)(d(C),d(G),d(I))};static \u0275cmp=b({type:i,selectors:[["app-login"]],decls:23,vars:13,consts:[[1,"relative","z-10","h-screen","w-full","mt-[150px]"],[1,"w-full","max-w-md","m-auto","bg-white","rounded","p-8","pb-12"],["src","./assets/images/chef.png",1,"w-24","mx-auto","mb-8"],[1,"mb-4",3,"ngSubmit","formGroup"],["class","text-red-500 mb-4 text-center",4,"ngIf"],[1,"mb-4"],[4,"ngIf"],["variant","on",1,"w-full","mb-8"],["id","username","pInputText","","formControlName","username","name","username","required","",1,"w-full"],["for","username"],["formControlName","password","type","password","styleClass","p-password p-component p-inputwrapper p-input-icon-right",1,"w-full",3,"feedback","inputStyle","toggleMask"],["for","password"],["label","Login","styleClass","w-full","type","submit"],[1,"flex","justify-between"],["label","Forgot Password?","icon","pi pi-exclamation-triangle","routerLink","/forgot-password","styleClass","text-gray-600!",3,"link"],["label","Create an account","icon","pi pi-user-plus","routerLink","/register","styleClass","text-gray-600!",3,"link"],[1,"text-red-500","mb-4","text-center"],[2,"color","red","margin-bottom","8px"]],template:function(r,t){if(r&1&&(e(0,"div",0)(1,"div",1)(2,"header"),m(3,"img",2),n(),e(4,"form",3),w("ngSubmit",function(){return t.onSubmit()}),c(5,J,2,1,"p",4),e(6,"div",5),c(7,K,3,0,"div",6),e(8,"p-floatlabel",7),m(9,"input",8),e(10,"label",9),s(11,"Username"),n()()(),e(12,"div",5),c(13,Q,3,0,"div",6),e(14,"p-floatlabel",7),m(15,"p-password",10),e(16,"label",11),s(17,"Password"),n()()(),e(18,"div",5),m(19,"p-button",12),n()(),e(20,"footer",13),m(21,"p-button",14)(22,"p-button",15),n()()()),r&2){let p,u;o(4),l("formGroup",t.loginForm),o(),l("ngIf",t.errorMessage),o(2),l("ngIf",((p=t.loginForm.get("username"))==null?null:p.hasError("required"))&&((p=t.loginForm.get("username"))==null?null:p.touched)),o(6),l("ngIf",((u=t.loginForm.get("password"))==null?null:u.hasError("required"))&&((u=t.loginForm.get("password"))==null?null:u.touched)),o(2),h(g(11,U)),l("feedback",!1)("inputStyle",g(12,U))("toggleMask",!0),o(6),l("link",!0),o(),l("link",!0)}},dependencies:[O,z,_,P,T,L,N,E,A,q,B,y,x,D,R,V,j,M,k],encapsulation:2})};export{H as LoginComponent};
