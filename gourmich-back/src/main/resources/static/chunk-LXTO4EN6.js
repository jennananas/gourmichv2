import{c as u}from"./chunk-GLAA6AID.js";import{f as n}from"./chunk-HSIN7PCI.js";import{oa as f,s as v}from"./chunk-C633TUPX.js";import{N as c,S as i}from"./chunk-2KLC34RG.js";var m=class a{constructor(e,r,t,s){this.authService=e;this.recipeService=r;this.router=t;this.messageService=s}favoriteStatus={};initializeFavorites(e){this.authService.isLoggedIn()?this.recipeService.getFavorites().subscribe({next:t=>{let s=new Set(t.map(o=>o.recipeId));e.forEach(o=>{this.favoriteStatus[o.id]=s.has(o.id)})},error:()=>{e.forEach(t=>this.favoriteStatus[t.id]=!1)}}):e.forEach(t=>this.favoriteStatus[t.id]=!1)}getFavoriteStatus(e){return this.favoriteStatus[e]||!1}toggleFavorite(e){if(!this.authService.isLoggedIn()){this.router.navigate(["/login"]);return}this.recipeService.toggleFavorite(e).subscribe({next:r=>{this.favoriteStatus[e]=r!=="Unfav recipe",this.messageService.add({severity:"success",summary:this.favoriteStatus[e]?"Ajout\xE9 aux favoris":"Retir\xE9 des favoris",detail:this.favoriteStatus[e]?"La recette est dans vos favoris":"La recette a \xE9t\xE9 retir\xE9e"})},error:r=>{console.error("Erreur lors du toggle",r),this.messageService.add({severity:"error",summary:"Erreur",detail:"Impossible de modifier les favoris"})}})}static \u0275fac=function(r){return new(r||a)(i(n),i(u),i(v),i(f))};static \u0275prov=c({token:a,factory:a.\u0275fac,providedIn:"root"})};export{m as a};
